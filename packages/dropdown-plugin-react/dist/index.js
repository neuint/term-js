import{useRef as e,useState as n,useCallback as r,useEffect as o}from"react";import{createPortal as t}from"react-dom";import c from"@neuint/dropdown-plugin";const l=l=>{const{term:p,children:s,className:u,items:a,onSelect:d,onClose:i}=l,m=e(new c(p.pluginManager)),[g,C]=n(),S=e({className:u,onSelect:d,onClose:i,opened:!1}),w=r((()=>{S.current.opened&&(S.current.opened=!1,C(void 0),m.current.hide(),S.current.onClose&&S.current.onClose())}),[]);return o((()=>{const{current:e}=m;return p.pluginManager.register(e),()=>{p.pluginManager.unregister(e)}}),[p.pluginManager]),o((()=>{S.current={opened:S.current.opened,className:u,onSelect:d,onClose:i}}),[u,d,i]),o((()=>{a.length?(S.current.opened?(m.current.show(a,{append:s?'<div class="DropdownComponent__append"></div>':void 0,className:S.current.className,onSelect:S.current.onSelect,onClose:w}),C(document.querySelector(".DropdownComponent__append"))):m.current.items=a,S.current.opened=!0):w()}),[a,s,C,w]),g&&s?t(s,g):null};export{l as default};
