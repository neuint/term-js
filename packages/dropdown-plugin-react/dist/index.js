import{useRef as e,useState as n,useCallback as r,useEffect as o}from"react";import{createPortal as t}from"react-dom";import c from"@neuint/dropdown-plugin";const l=l=>{const{term:p,children:s,className:a,items:u,onSelect:d,onClose:m}=l,i=e(new c(p.pluginManager)),[g,C]=n(),S=e({className:a,onSelect:d,onClose:m,opened:!1}),w=r((()=>{S.current.opened&&(S.current.opened=!1,C(void 0),i.current.hide(),S.current.onClose&&S.current.onClose())}),[]);return o((()=>{p.pluginManager.register(i.current)}),[p.pluginManager]),o((()=>{S.current={opened:S.current.opened,className:a,onSelect:d,onClose:m}}),[a,d,m]),o((()=>{u.length?(S.current.opened?(i.current.show(u,{append:s?'<div class="DropdownComponent__append"></div>':void 0,className:S.current.className,onSelect:S.current.onSelect,onClose:w}),C(document.querySelector(".DropdownComponent__append"))):i.current.items=u,S.current.opened=!0):w()}),[u,s,C,w]),g&&s?t(s,g):null};export{l as default};
